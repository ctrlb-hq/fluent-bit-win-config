[SERVICE]
    Flush                       1
    Daemon                      Off
    Log_Level                   info
    Parsers_File                C:\Program Files\fluent-bit\conf\parsers-onbe-staging.conf
    HTTP_Server                 On
    HTTP_Listen                 0.0.0.0
    HTTP_Port                   2020
    storage.path                C:\temp\flb-storage
    storage.sync                normal
    storage.checksum            off
    storage.backlog.mem_limit   128M
    storage.max_chunks_up       256

[INPUT]
    Name                        tail
    Path                        D:\c-base\logs\*.log
    Tag                         log4j.app.l0
    DB                          C:\temp\flb-storage\tail0.db
    DB.Sync                     Normal
    Read_from_Head              true
    Skip_Empty_Lines            On
    Refresh_Interval            1
    multiline.parser            java
    Buffer_Chunk_Size           16MB
    Buffer_Max_Size             32MB
    Mem_Buf_Limit               50MB
    storage.type                filesystem

[INPUT]
    Name                        tail
    Path                        D:\c-base\logs\*\*.log
    Tag                         log4j.app.l1
    DB                          C:\temp\flb-storage\tail1.db
    DB.Sync                     Normal
    Read_from_Head              true
    Skip_Empty_Lines            On
    Refresh_Interval            1
    multiline.parser            java
    Buffer_Chunk_Size           16MB
    Buffer_Max_Size             32MB
    Mem_Buf_Limit               50MB
    storage.type                filesystem

[INPUT]
    Name                        tail
    Path                        D:\c-base\logs\*\*\*.log
    Tag                         log4j.app.l2
    DB                          C:\temp\flb-storage\tail2.db
    DB.Sync                     Normal
    Read_from_Head              true
    Skip_Empty_Lines            On
    Refresh_Interval            1
    multiline.parser            java
    Buffer_Chunk_Size           16MB
    Buffer_Max_Size             32MB
    Mem_Buf_Limit               50MB
    storage.type                filesystem

[INPUT]
    Name                        tail
    Path                        D:\c-base\logs\*\*\*\*.log
    Tag                         log4j.app.l3
    DB                          C:\temp\flb-storage\tail3.db
    DB.Sync                     Normal
    Read_from_Head              true
    Skip_Empty_Lines            On
    Refresh_Interval            1
    multiline.parser            java
    Buffer_Chunk_Size           16MB
    Buffer_Max_Size             32MB
    Mem_Buf_Limit               50MB
    storage.type                filesystem


[FILTER]
    Name                        parser
    Match                       log4j.app.*
    Key_Name                    log
    Parser                      timestamp_only_parser
    Reserve_Data                On

[FILTER]
    Name                        modify
    Match                       *
    Rename                      message body

[FILTER]
    Name                        modify
    Match                       *
    Rename                      timestamp onbe_timestamp

[FILTER]
    Name                        modify
    Match                       *
    Rename                      log_level level

# Fallback filter to ensure unparsed logs also go to 'body' field
[FILTER]
    Name                        modify
    Match                       *
    Condition                   Key_does_not_exist body
    Rename                      log body

[OUTPUT]
    Name                        http
    Match                       *
    Host                        <CTRLB_BACKEND_IP_ADDR>
    Port                        <CTRLB_BACKEND_IP_PORT>
    URI                         /api/default/qa/_json
    Format                      json
    Json_date_key               _timestamp
    Json_date_format            iso8601
    Header                      Content-Type application/json
    tls                         Off
    Retry_Limit                 3
    workers                     4

# [OUTPUT]
#     Name                        stdout
#     Match                       *
#     Format                      json_lines
#     Json_date_key               _timestamp
#     Json_date_format            iso8601